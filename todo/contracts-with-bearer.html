<!-- extend base layout -->
{% extends "doc.html" %}
{% block doc %}

<div class="col-sm-6 col-sm-offset-3 col-md-6 col-md-offset-3 col-lg-6 col-lg-offset-3">
	<div class="page-header">
		<h1 class="text-center">
			Contratos com Titular <br><small>Nick Szabo</small>
		</h1>
		<h4 class="text-center">
			Originalmente publicado em 1997<br>
		</h4>
	</div>

	<h2>Certificados de Titular</h2>

	<p>
		"Certificado de titular digital" é um termo amplamente desenvolvido por este autor<sup><a href="#fn1" id="ref1">[1]</a></sup> incorporando pelo menos duas tecnologias emergentes: dinheiro digital e capacidaes distribuídas (referências seguras de objetos distribuídos). Primeiro descreverei o protocolo chaumiano e seu recurso inovador de privacidade. Em seguida, discutirei como essas ideias são mapeadas para o mundo das capacidades na seção sobre direitos genéricos versus direitos específicos. Alterei a terminologia de dinheiro digital para certificado de titular ou ficha, de casa da moeda para emissor ou agente de transferência, e assim por diante, para refletir a capacidade dos protocolos de Chaum de generalizar. Os certificados de titular de Chaum implementam direitos padronizados transferíveis independentemente da identidade do titular. Cada tipo de contrato (por exemplo, cada denominação de "moeda" em dinheiro digital) corresponde a uma assinatura digital, assim como cada emissão de títulos da Reserva Federal ou certificados de ações corresponde a uma determinada conta.
	</p>

	<p>
		No protocolo chaumiano mais direto, o emissor e o agente de transferência (a mesma entidade, para os nossos propósitos, embora possam ser facilmente separados) criam um número de série (na verdade, um grande número aleatório, ao invés de uma sequência), e o anexam a uma lista de certificados emitidos. O agente de transferência libera uma transferência (ou seja, resgata o certificado) verificando a assinatura para identificar a classe de contrato de titular e verificar se ela foi feita, em seguida, examinando a lista emitida desse contrato para garantir que o número de série esteja lá e removendo o número de série. Alternativamente, o emissor pode deixar a emissão formar o número de série e, quando estiver removido, verificar a assinatura e colocar o número na lista de certificados removidos. A assinatura fornece a garantia de que o certificado é de fato o tipo específico de contrato com o titular, enquanto o número de série assegura que a mesma instância desse contrato não seja compensada ou resgatada mais de uma vez. Nessas versões simples, o agente de transferência pode vincular o cessionário ao transferidor para todas as transferências. Para implementar as características de privacidade de moedas e certificados de titular físico, precisamos adicionar recursos de desvinculação.
	</p>

	<h2>Assinaturas Disfarçada ("Blind Signatures")</h2>

	<p>
		Conheça a maior equação simples desde e=mc<sup>2</sup>:
	</p>

	<p>
<pre>gSf(m) = S(m)</pre>
	</p>

	<p>
		<code>S</code> é uma assinatura digital. <code>f</code> é a função de disface, e <code>g</code> uma função de desvendar. As funções de disfarce são geralmente baseadas em um número aleatório secreto chamado "fator de disfarce". <code>m</code> é outro número aleatório, um identificador único que pode, por exemplo, referir-se a uma instância de algum objeto.
	</p>

	<p>
		A ideia é muito inteligente, mas muito simples. Pode ser contra-intuitivo porque a mais simples metáfora do mundo físico deste e-commerce primitivo altamente útil parece um tanto quanto inútil: Alice pode fazer com que Carol assine um cheque em branco! Veja como:
	</p>

	<p>
		<ol>
			<li>
				Alice gera <code>m</code> e o disfarça. O "Disfaçar" é apenas uma criptografia one-time-pad para si mesmo, <code>f(m)</code>. Ela envia isso para Carol. É como pegar um pedaço de papel e selá-lo dentro de um envelope que Carol não pode abrir ou ver.
			</li>
			<li>
				Carol então assina: <code>Sf(m)</code>, e manda de volta para Alice. É como se Carol estivesse assinando o lado de fora do envelope.
			</li>
			<li>
				Alice desvenda: <code>gSf(m) = S(m)</code>. Carol também assinou o papel que Alice colocou dentro do envelope!
			</li>
		</ol>
	</p>

	<p>
		O gênio por trás dessa descoberta: o guru da criptografia, David Chaum. O brilhantismo está no passo 3: Chaum descobriu que algumas assinaturas têm a propriedade de serem "comutativas" com as funções de disfarce: Alice pode retirar o disfarce na ordem inversa à qual a cegueira e a assinatura foram aplicadas, deixando apenas a assinatura de n. É como se Alice colocasse um pedaço de papel carbono dentro do envelope!
	</p>

	<p>
		Em particular para assinaturas RSA, com chave pública (pq, e) e chave privada d, as funções de assinatura cega são o seguinte módulo pq:
	</p>

	<p>
<pre>
S(x) = x<sup>d</sup>
g(x) = xk<sup>-1</sup>
f(x)= xk<sup>e</sup>
</pre>
	</p>

	<p>
		Podemos verificar se a propriedade de assinatura disfarçada contém: <code>gSf(m) = (m(k<sup>e</sup>))<sup>d</sup> * k<sup>-1</sup> = m<sup>d</sup> * k * k<sup>-1</sup>	= m<sup>d</sup></code>, qual é a assinatura RSA válida da chave privada d em m.
	</p>

	<h2>Transferências Desvinculadas </h2>

	<p>
		Distinguir entre um contador ou um terceiro rastreando o nome verdadeiro de uma pessoa, por falta ou deficiencia no mix de comunicações, e um terceiro vinculando duas entidades (seja nyms, usando mais de uma vez o mesmo endereço, números de contas ou nomes verdadeiros) como estando envolvido na mesma transação. Por desvinculadas aqui queremos dizer o último. A meta em que nomes verdadeiros são usados (isso ocorre, por exemplo, ao usar contas de nome verdadeiro ou não usar boas misturas de comunicação), é impedir a vinculação de terceiros de duas pessoas que fazem negócios entre si. Onde nyms são usados, o objetivo é minimizar a liberação de informações de tráfego, evitar o acúmulo indesejado de padrões de comportamento únicos, que poderiam ser usados para vincular nyms (incluindo seus nomes verdadeiros), ou poderiam aumentar outros meios de violação de privacidade. disfarces ajudam especialmente quando os detentores de direitos desejam manter contas públicas ou de terceiros expressas em direitos genéricos. Nesse caso, um mix de comunicação nem em princípio nos dá o que o disfarce faz.
	</p>

	<p>
		Além de proteger contra o agente de transferência, os protocolos de transferidor, transferência e dupla ocultação chaumiana protegem contra a conivência de uma parte com um agente de transferência para identificar parte da conta ou nym.
	</p>

	<p>
		A desvinculação pode ser fornecida pela combinação de uma lista de certificados limpos com assinaturas disfarçadas e um delay na mistura. Exemplos suficientes de um contrato padronizado são emitidos durante um período de tempo para criar um mix. Entre a emissão e a liberação de um certificado, muitos outros certificados com a mesma assinatura serão apagados, tornando altamente improvável que uma compensação específica possa ser vinculada a uma determinada entrega por meio da assinatura. Existe uma troca entre o efeito de mistura e a exposição ao roubo de uma "placa" por um problema específico: quanto menor a entrega, menor a exposição, mas maior a conectividade; uma entrega maior tem maior exposição e maior confidencialidade.
	</p>

	<p>
		As assinaturas disfarçadas podem ser usadas para tornar as transferências de certificado não vinculáveis através do número de série. A privacidade do agente de transferência pode tomar a forma de transferência, desvinculação, não-vinculação do transferidor ou "duplo disfarçe", em que tanto o cedente quanto o cessionário não podem ser vinculados pelo agente de transferência ou conlusão de um agente de transferência e contraparte.
	</p>

	<p>
		Um mix de comunicação com uso único de endereços, mais a previsão de qualquer ganho de reputação de manter contas, em teoria também nos compra de desvinculação, mas um mix de comunicações é fraco e muito caro.
	</p>

	<p>
		Bearer certificates come in an "online" variety, cleared during every transfer, and thus both verifiable and observable, and an "offline" variety, which can be transferred without being cleared, but is only verifiable when finally cleared, by revealing any the clearing name of any intermediate holder who transferred the object multiple times (a breach of contract).
		Os certificados de titular vêm em uma variedade "on-line", limpa durante cada transferência e, portanto, verificável e observável, e uma variedade "off-line", que pode ser transferida sem ser compensada, mas só é verificável quando finalmente liberada, revelando qualquer detentor intermediário que transferiu o objeto várias vezes (uma quebra de contrato).
	</p>

	<p>
		Essa desvinculação é muitas vezes chamada de "anonimato", mas a questão de se as contas são emitidas para nomes reais ou pseudônimos e se o transferidor e o cessionário se identificam é ortogonal à não-vinculação pelo agente de transferência no modelo on-line. No modelo off-line, a identificação da conta (ou pelo menos um pseudônimo altamente confiável e / ou seguro) é necessária: passar um certificado off-line pela segunda vez revela essa identidade. Além disso, os canais de comunicação podem permitir que a transação anterior vincule o transferidor e o cessionário, a menos que eles tomem a precaução de usar um remailer anônimo. A compensação on-line faz da falta de identificação uma opção razoável para muitos tipos de transações, embora as situações comuns de crédito e garantia geralmente sejam beneficiadas ou até mesmo exijam identificação.
	</p>

	<p>
		Ao confrontar uma tentativa de compensação de um número de série vazio, enfrentamos um dilema de erro ou fraude semelhante ao que encontramos acima na contabilidade de dupla entrada. O protocolo ecash&#0153; do DigiCash atualmente aproveita propositalmente para se recuperar de uma falha de rede. Quando os certificados são perdidos pela rede, não é claro para o transmissor se eles foram recebidos ou compensados pelo cessionário ou não. A segunda transferência diretamente com o agente de transferência resolve a ambigüidade. Isso só funciona com o protocolo online. A questão de distinguir erro de fraude é urgente no protocolo off-line, mas ainda não há uma solução altamente satisfatória. Este problema é muitas vezes intratável devido à subjetividade da intenção.
	</p>

	<p>
		Com a comunicação anônima bidirecional ideal entre as chaves de uso único e a compensação totalmente sem conta, a não-conectividade por meio de assinaturas disfarçadas se torna redundante. Este caso ideal ainda não foi abordado de perto com a tecnologia implementada e envolve necessariamente longos atrasos nas comunicações, que muitas vezes são intoleráveis. Misturas de comunicação realmente imperfeitas e tokens disfarçados menos caros se complementam.
	</p>

	<h2>Objetos Conservados</h2>

	<p>
		A emissão e a transferência limpa de referências a um objeto distribuído conservam o uso desse objeto. Esse objeto se torna "escasso" em termos econômicos, assim como o uso de objetos físicos é finito. Objetos conservados fornecem a base para uma economia de software que mais se assemelha à economia de objetos físicos escassos. Objetos conservados podem ser usados para excluir seletivamente não apenas recursos físicos escassos (como tempo de CPU, largura de banda de rede e tempo de resposta, etc.), mas também frutos de trabalho intelectual & ndash; contanto que alguém esteja disposto a pagar o preço para interagir com essa informação pela rede em vez de localmente (cf. gerenciamento de direitos de conteúdo). A conservação imuniza objetos e os recursos que eles encapsulam para ataques de negação de serviço. Os protocolos de certificado de portador podem ser usados para transferir referências para uma instância específica ou conjunto de instâncias de um objeto, assim como podem ser usadas para transferir outros tipos de direitos padronizados.
	</p>

	<p>
		Para implementar uma transação completa de pagamento por serviços, muitas vezes precisamos de mais do que apenas o protocolo de dinheiro digital; precisamos de um protocolo que garanta que o serviço será prestado se o pagamento for feito e vice-versa. Os sistemas comerciais atuais usam uma ampla variedade de técnicas para realizar isso, como correspondência certificada, troca face a face, confiança em histórico de crédito e agências de cobrança para conceder crédito, etc. Eu discuto tais questões em meu artigo sobre <a href="http://nakamotoinstitute.org/formalizing-securing-relationships.html">Contratos Inteligentes</a>.
	</p>

	<!--
	<h4 class="text-muted">Credenciais</h4>

	<p class="text-muted">
		Uma credencial é uma reivindicação feita por uma parte sobre outra. Uma credencial positiva é uma que a segunda parte prefere revelar, como um grau de uma escola de prestígio, enquanto essa parte prefere não revelar uma credencial negativa, como uma classificação de crédito ruim.
	</p>

	<p class="text-muted">
		A Chaumian credential is a cryptographic protocol for proving that one's pseudonym (for example, the identification number one uses in a health care system) possesses credentials issued to one's other pseudonyms, without revealing linkages between these pseudonyms or between pseudonym and true name. It's based around the is-a-person credential the true name credential, used to prove, without revealing, the linkage between pseudonyms, and to prevent the transfer of pseudonyms between parties.
Uma credencial chaumiana é um protocolo criptográfico para provar que o pseudônimo de alguém (por exemplo, o número de identificação usado em um sistema de saúde) possui credenciais emitidas para outros pseudônimos, sem revelar ligações entre esses pseudônimos ou entre pseudônimo e nome verdadeiro. Baseia-se em torno da credencial de nome verdadeiro, usada para provar, sem revelar, a ligação entre pseudônimos e para evitar a transferência de pseudônimos entre as partes.
	</p>
	-->

	<h4>Generic vs. Specific Rights</h4>

	<p>
		To discuss the mapping between Chaumian certificates and distributed capabilities as implemented in for example <a href="http://www.erights.org/">E</a> I introduce some different, partly overlapping terminology: generic vs. specific, exclusive vs. non-, Transfer Agent vs. Provider, token vs. Swiss number.
	</p>

	<p>
		Rights can be generic or specific. Generic rights correspond to a class of objects, specific rights to an instance. So a specific right is implemented with a Swiss number, a large random number. The signed numbers corresponding to generic rights I will call "tokens".
	</p>

	<p>
		Rights can also be exclusive or non-exlusive. Any object which must be conserved, or finally allocated to a specific user, is "exclusive".
	</p>

	<p>
		Simple example: the right to an exclusive lock on some 1 MB of memory is generic and exclusive.  The right to an exclusive lock on the specific address space 100-101 is specific and exclusive. The right to two dozen particular stock quotes at 12:22 p.m. today is specific and non-exclusive.
	</p>

	<p>
		The main motivation for these distinctions are different mechanisms of unlinkable transfer of these rights, set out below.
	</p>

	<p>
		For simplicity generic rights are all "use-once": the life cycle of a token consists of issuance, followed by a series of transfers, followed by consumption. More sophisticated life cycles, such as alternating transfer and consumption, are likely possible with some extra protocol.
	</p>

	<p>
		With a perfect communications mix, including use-once return addresses, and no reputation building, we wouldn't need blinded tokens. However, communications mixes are expensive, and we want the option of having certain public records by which to build reputations, yet do certain rights transfers privately. For these reasons, we should allow clients to blind token transfers in addition to providing a communications mix.
	</p>

	<p>
		For inexpensive, unlinkable, and verifiable transfer of exclusive generic rights, using blinded tokens, there must be a signficant population of interchangable generic rights. Such rights bundled with nonexlusive specific rights can also be cheaply transferred since online clearing is not required for the latter. Unlinkable and verifiable transfer of exclusive specific rights seems to require online clearing via an expensive communications mix.
	</p>

	<p>
		Two kinds of TTPs: a Transfer Agent (TA) and a Provider. The TA operates like an accountless digital cash mint, clearing the transfer of tokens for generic rights. Digital cash is a special case: money is the most generic of rights.
	</p>

	<p>
		The Provider is responsible for actually holding the object, which can contain unique state. The Provider issues a Swiss number, or better a signed description of the specific right and its Swiss number. This signature allows offline verification of the nonexlusive right where the Provider is reputable. The TA issues a token for the corresponding generic rights.
	</p>

	<p>
		Chaum has also developed other means for dealing with unique state<sup><a href="#fn2" id="ref2">[2]</a></sup>.
	</p>

	<p>
		I'm assuming the TA and Provider have known reputable signatures. The trust or reputation  needed to ensure correctness of transfer between Provider, TA, and users is partly left for later analysis. The two main goals here are to assure that users can verify their rights (including exclusivity from transferors where promised) and retain full privacy from TAs and Providers. Some other trust assumptions are likely made here which need to be explicated and analyzed.
	</p>

	<p>
		To implement exclusive transfers, the TA keeps a list of cleared (cancelled) token numbers. The TA corresponds to a "mint" in the Chaumian online digital cash protocol (see above). A class of generic rights corresponds to a "denomination" of coin. The Provider may also keep a list of outstanding or used Swiss numbers, like an E Registrar.
	</p>

	<p>
		Here is another example of a generic right, or class of fungible objects: "A queriable SQL database with up to 10 MB of storage, and certain standard response time guarantees".
	</p>

	<p>
		The TA sees only classes of fungible objects. The Provider and users see particular instances with unique state, for example a database filled with unique information.
	</p>

	<p>
		The Provider acts analogously to a "shop". It is just another token client to the TA, which like other clients can transfer or receive tokens. Its special role is that it is responsible for issuance, where it tells the TA about a new instance, obtains a new token, and transfers it to the client to whom the new generic right is being issued. The TA generates and destroys token supply only at the behest of the Provider; otherwise all its transfers conserve the supply of a particular generic right. The Provider is also responsible for the delivery of service to the client bearing the promised right(s), at which time the Provider "deposits" the generic token(s), instructing the TA to decrement the token supply.  In digital cash terminology, the Provider is the only entity which has to keep something like a bank account. Rights holders can also keep an account, if they wish to use it to help build reputation, or they can just use the TA for accountless conserved rights transfer.
	</p>

	<p>
		The Provider issues along with the initial generic rights token a signed affadavit, machine or human readable, describing aspects of the object which may be non-exlusive and unique, along with that instance's Swiss number and the public key(s) of the generic right(s) for which it is valid. For example, it  might say "a database containing quotes of these two dozen listed stocks as of 12:22 pm Monday", without actually containing those quotes. Often such description is worth more when bundled with generic exclusive rights, such as the right to a fast response time. The specific rights can elaborate in unique ways upon the generic rights, as long as these elaborations are not taken to define exclusive rights. The generic rights let the TAs garuntee exclusivity to users and conservation of resources to Providers, while the specific rights describe the unique state to any desired degree of elaboration. The Provider must be prepared to service any specific promise it has issued, as long as it is accompanied by the proper conserved generic tokens.
	</p>

	<p>
		This method of composing specific and generic rights, transferred as a bundle but with exlusive generic atoms cleared by different TAs, allows arbitrarily sophisticated rights bundles, referring to objects with arbitrarily unique state, to be transferred unlinkably. A wide variety of derivatives and combinations are possible. The only restriction is that obtaining rights to specific exclusive resources must either be deferred to the consumption phase, or transferred with online clearing via expensive communications mix.
	</p>

	<p>
		If the Provider wished to guarantee exclusivity to a specific right, transfer seems to require an expensive communications mix between Provider and transferee, rather than a cheap blinded token. For example, "Deep Space Station 60 from 0500-0900 Sunday" or "a lock on autoexec.bat now" demands exclusivity to a specific right, and thus seems to require a communications mix to unlinkably transfer. On the other hand, "A one hour block on DSS-60 in May" and "the right to lock autoexec.bat at some point" are generic and can be transferred privately with the much less expensive blinding, given a sufficient population of other tokens for this class of generic right transfered between the issuance and consumption of a given token.
	</p>

	<p>
		Clients can deal with the TA without a communications mix. They deal with the Provider via a communications mix. If both the initial and final holders failed to do this, the Provider could link them. If just the final holder failed to do so, the Provider could identify him as the actual user of the resource. Thus for full privacy generic transfers are cheap, and nonexclusive transfers are cheap, while specific exsclusive transfers and actually using the object seem to require the expensive communications mix.
	</p>

	<h2>Acknowledgements</h2>

	<p>
		My thanks to David Chaum, Mark Miller, Bill Frantz, Norm Hardy, and many others for taking the time to give me their valuable insights into these issues.
	</p>

	<h2>References</h2>

	<ol>
		<li id="fn1">
			<p>
				The first public references to this idea can be found <a href="http://www.i-m.com/archives/9412/0179.html">here</a>, <a href="http://szabo.best.vwh.net/smart.contracts.html">here</a>. I also referred to this idea during this period in many personal communications, using the phrases "digital bearer instrument", "digital bearer certificate", "scarce object", and "conserved object". The idea of digital bearer certificates as a serious proposal for the financial industry has been popularized, with many intruiging additional ideas, by Bob Hettinga.
			</p>
			<!--
			<p class="text-muted">
				The phrases "digital bearer certificate" and "digital bearer settlement(DBS)" were soon thereafter popularized by a correspondent of mine, Robert Hettinga, as referring to a legal/institutional idea of instant, irrevocable settlement made possible by both the instant clearing and privacy features of this technology.&nbsp;<a href="#ref1">↩</a>
			</p>
			-->
		</li>

		<li id="fn2">
			<p>
				David Chaum, <a href="http://www.digicash.com/news/archive/online.html">Online Cash Checks</a>&nbsp;<a href="#ref2">↩</a>
			</p>
		</li>

		<li id="fn3">
			<p>
				<a href="http://nakamotoinstitute.org/literature/blind-signatures/">"Blind Signatures for Untraceable Payments,"</a> D. Chaum, <br>
				Advances in Cryptology Proceedings of Crypto 82, <br>
				D. Chaum, R.L. Rivest, &amp; A.T. Sherman (Eds.), Plenum, pp. 199-203.
			</p>
		</li>

		<li id="fn4">
			<p>
				<a href="http://www.erights.org/">The E distributed object language</a>
			</p>
		</li>
	</ol>

	<hr>
	<p>
		Please send your comments to nszabo (at) law (dot) gwu (dot) edu
	</p>

	<p>
		Copyright &copy; 1997, 1999 by Nick Szabo<br>
		Permission to redistribute without alteration hereby granted
	</p>

</div>
{% endblock %}
